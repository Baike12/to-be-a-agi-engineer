# 1	红黑树
#### 1.1.1.1	平衡搜索二叉树avl的问题
- 插入和删除的时候调整需要很多时间，只适合查询多的情况
## 1.2	红黑树
### 1.2.1	规则
- 根节点和叶子节点必须是黑的
- 红节点的两个孩子都必须是黑的
- 任一节点到其每个叶子节点的黑节点数量一致
### 1.2.2	推论
- 一个节点的左子树和右子树的黑色节点层数相同
### 1.2.3	操作
#### 1.2.3.1	变色
#### 1.2.3.2	左旋
- 左旋p，p的父节点变成它的左子树
- p的左子树变成它的父节点的右子树
- p的右子树不变
#### 1.2.3.3	右旋
- 右旋p，p的父节点变成它的左节点
- p的左子树变成父节点的左子树
- p的左子树不变
![[Pasted image 20240913212627.png]]
### 1.2.4	插入
- 将插入节点设置为红色
#### 1.2.4.1	红黑树是空的
- 直接插入，并将颜色设置为黑色
#### 1.2.4.2	插入的值key已经存在
- 更新它的val就行
#### 1.2.4.3	插入节点的父节点为黑色
- 直接插入
#### 1.2.4.4	插入节点父节点为红色
- 此时祖父一定是黑色，叔叔的颜色可以是红或者黑色
##### 1.2.4.4.1	叔叔为红
- 将爷爷变成红色，并作为后序操作的p，如果p的父节点是红色，就不不满足红黑树，需要对p进行调整
##### 1.2.4.4.2	叔叔为黑
分为四种情况
1. 父亲为祖父的左节点，分为两种
	1. 插入节点是父亲的左子节点
		1. 将父亲设置为黑色，祖父设置为红色，然后对父亲右旋
	2. 插入节点是父亲的右子节点
		1. 对插入节点左旋
		2. 就变成上面一种情况了，照上面的处理就行了
2. 父亲为祖父的右节点
	1. 插入节点是父节点的右子节点
		1. 将父亲变黑
		2. 对祖父变红，然后父亲左旋
	2. 插入节点是父亲的左子节点
		1. 对当前节点右旋
		2. 变成上一种情况




